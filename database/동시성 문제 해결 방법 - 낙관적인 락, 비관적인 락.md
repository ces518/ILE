### 동시성 문제 해결 방법 - 낙관적인 락, 비관적인 락

#### 낙관적인락 (비선점락) - Optimistic Lock
- 낙관적/비선점 이라는 용어는 락을 해야하는 상황이 발생하면 자원을 선점 시키지 말고 그때 대응하자는 의미이다.
- Versioning 을 통해 해결한다.

`프로세스`
- 1.version 이라는 컬럼을 가지고 있고, 해당 자원을 읽어올때 version 정보도 함께 가져온다.
- 2.Update 할 정보를 수정하며, WHERE 조건으로 해당 version 을 같이 넣어준다.
- 만약 내가 수정하는사이 누군가 수정하지 않았다면 정상적으로 수정이 될 것이고, 그렇지 않다면 수정된 로우가 0이 될것이다.

> JPA 의 경우에는 이런 상황에서 Optimistic Lock Exception 예외를 발생시킨다.

##### 비관적인 락 (선점락) - Pessimistic Lock
- 자원에 대한 동시다발적인 요청 발생시 일관성 문제가 생길것이며, 이를 비관적이라 생각하고 자원을 선점하는 방식으로 해결한다는 의미이다.
- 동시에 한명씩 읽어가며 사용하도록 하는 방식으로 주로 해결한다
    - SELECT FOR UPDATE 를 사용하는 방식이 주 해결책이다.

> 이방법으로 모든 상황이 해결되는것은 아니다. 자원의 순환참조로 교착상태에 빠질수 있다.
