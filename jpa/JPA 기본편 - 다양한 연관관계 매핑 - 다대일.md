# JPA 기본편 - 다양한 연관관계 매핑 - 다대일

#### 연관관계 매핑시 고려사향 3가지
- 다중성
    - 1:N, N:1 .. 
- 단방향, 양방향
- 연관관계의 주인

#### 다중성
- 다대일
    - @ManyToOne
- 일대다
    - @OneToMany
- 일대일
    - @OneToOne
- 다대다
    - @ManyToMany

- 데이터베이스 관점으로 고민해 보면 된다.
- JPA의 매핑 애노테이션 들은 데이터베이스에서 매핑을 하기 위해 존재하는것
- 다대다는 실무에선 사용해선 안됨

> 애매하거나 헷갈리경우 반대편을 생각해 볼것

#### 단방향 양방향
- 테이블
    - 외래 키 하나로 양쪽 조인이 가능하다
    - 방향이라는 개념이 없다.

- 객체
    - 참조 필드가 존재하는 쪽응로만 참조가 가능하다.
    - 한쪽만 참조하면 단방향
    - 양쪽이 서로 참조하면 양방향
        - 사실 2개의 단방향이 존재하는것

#### 연관관계의 주인
- 테이블은 외래키 하나로 두 테이블이 연관관계를 맺음
- 객체의 양방향은 참조가 2 군데
- 객체의 양방향 관리는 두군데 , 둘중 테이블의 외래키를 관리할 곳을 정해줘야 한다.
- 연관관계의 주인
    - 외래 키를 관리하는 참조
- 주인의 반대
    - 외래 키에 영향을 주지 않음
    - 단순 조회만 할 수 있다.    

#### 다대일 단방향
[객체연관관계]
- Member
    - id
    - Team team
    - username
- Team  
    - id
    - name

[테이블연관관계]
- MEMBER
    - MEMBER_ID (PK)
    - TEAM_ID (FK)
    - USERNAME
- TEAM
    - TEAM_ID (PK)
    - NAME

#### 다대일 단방향 정리
- 가장 많이 사용하는 매핑 
- 다대일의 반대는 일대다


#### 다대일 양방향
[객체연관관계]
- Member
    - id
    - Team team
    - username
- Team  
    - id
    - name
    - List members

[테이블연관관계]
- MEMBER
    - MEMBER_ID (PK)
    - TEAM_ID (FK)
    - USERNAME
- TEAM
    - TEAM_ID (PK)
    - NAME

#### 다대일 양방향 정리
- 외래 키가 있는 쪽이 연관관계의 주인
- 양쪽을 서로 참조하도록 개발
