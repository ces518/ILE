# TCP/IP 프로토콜
#### TCP/IP 주소의 구조
- 물리주소 
    - 물리주소는 링크주소 or 통신망에 정의된 노드주소, 이더넷 네트워크인터페이스카드 등을 말한다.

- 인터넷 주소 
    - 인터넷에서 기존 주소와는 달리 각 호스트를 식별할수있는 유일한 주소를 지정해야한다.

- 포트주소
    - 수신지 컴퓨터 까지 전송하려면 IP주소와 물리주소가 필요하다.
    - 한 프로세스가 다른프로세스에게 통신할수있도록 하는것이 인터넷통신의 목적이다.


#### TCP/IP 계층 
- 응용 계층
- 전송 계층 > 포트주소
- 네트워크 계층 > IP주소 
- 네트워크 접속계층 > 물리주소 

- TCP 연결형 데이터 서비스
    - 송신측 TCP 포트에서 수신측 포트로 바이트 스트림을 전송하는 연결형 데이터전달 서비스
    - 사용자가 연결요청시 , 수신측에서 연결에 동의하여 연결이 되게된다.
    - 연결지향형 프로토콜
        데이터 전송전 먼저 송수신을 할수있도록 연결후 데이터를 송수신하는것이다.

- 포트번호 
    - 포트는 TCP가 상위계층으로 데이터를 전달하거나 
        상위계층에서 TCP로 데이터를 전달시 상호간의 데이터  이동통로를 말함
    - 통신할때 여러 사이트에서 파일을 동시에 다운로드 가능하다.
    - 웹서비스 , 이메일 서비스등은 편리하게 접속가능하도록 미리 할당해놓은 포트를 사용한다.
    - 웹서비스는 HTTP프로토콜 을 사용하므로 80포트를 사용한다.
    - 포트번호를 입력하지않아도 자동으로 80으로 할당된다.
```
20 : FTP데이터
21 : FTP 접속
23 : 텔넷
25 : SMTP
80 : HTTP 
```

- IP (인터넷 프로토콜)
    - 인터넷에 연결된 모든 컴퓨터에는 고유의 주소가 부여되는데 이를 IP주소라한다.
        - 현재 사용하는 주소체계는 IPV4
        - 8비트 크기의 필드를 4개 모아서 구성한 32비트 논리주소
        - XXX.XXX.XXX.XXX
        - .으로 구분한 10진수 형태로 네개로 구성되어있다.
        - 0.0.0.0 ~ 255.255.255.255 까지 가질수있다.

- TCP (전송제어 프로토콜 )
    - TCP 세그먼트
        - TCP 프로토콜은 전송을 위해 바이트 스트림을 세그먼트 단위로 나눈다.

- 세그먼트란 ?
    - TCP 를 이용하여 두 장치간에 전달하는 데이터의 단위를 말한다.

```    
IP헤더 TCP헤더 TCP데이터 
    < TCP세그먼트  >
<  I P 데이터그램     >
```

- 필드 
    - 송신지 포트 번호
        - 세그먼트를 전송하는 호스트에 있는 응용프로그램의 포트번호 
    
    - 수신지 포트번호 
        - 클라이언트의 포트번호 

    - 순서번호 
        - 세그먼트에 포함된 데이터의 첫번째 바이트에 부여된것 32비트 부호없는 번호 
    
    - 확인 응답번호
        - 세그먼트를 수신하는 노드가 상대편 노드가 수신하려는 바이트의 번호 
        - 성공적으로 수신했을경우 수신한 바이트번호 + 1 이된다.

    - 헤더 길이
        - TCP 헤더길이를 4바이트 값으로 나타내며 20~60바이트가 될수있음.
    
    - 예약 필드 
        - 나중에 사용하려고 예약된 6비트 필드 
    
    - 플래그 
        - 프로토콜의 동작을 제어하는데 사용하는 비트단위의 플래그

    - 윈도우 크기 
        - 상대방이 유지해야하는 바이트 단위의 윈도우크기를 정의하며 16비트이다 . 

    - 검사합 CHECK_SUM
        - 헤드부분의 오류를 검출하는 합 계산이 포함된다.


- IP 주소 체계  
    - 효율적 배정을 위해클래스를 도입 
    - 클래스에는 ABCDE 다섯개가있다.
    - D는 IP멀티 캐스팅 ,E는 자원확보를위한 예비 실제사용은 ABC클래스


- A 클래스 
    - 네트워크 주소 8비트, 호스트주소 24비트 사용
    - 왼쪽비트는 0으로 고정 
    첫 자리는 0~127의 범위를 가진다. 
    - 대형 기관 및 기업에서 사용한다.

- B 클래스 
    - 네트워크 주소 16비트 호스트주소 16비트
    - 128~191 로 시작한다.
    - 중형 기관 및 기업에서 사용한다.

- C 클래스 
    - 소규모 네트워크에서 가장 많이 사용하는 클래스 
    - C클래스를 구분하는데 사용하는 식별자는 110 으로 시작 
    - 192 ~ 223 으로 시작한다.
    - 소규모 기관에서 사용한다.

- D 클래스 
    - 224 ~ 239 로 시작 
    - 멀티캐스트 용도로 사용 

- E 클래스 
    - 240 ~ 250 으로 시작
    - 미래에 사용하려고 남겨둔 주소 



#### 패킷 전송
- 패킷 전송을 보증하기위해 TCP는 ACK와 재전송 기법을 사용 
- 성공 수신 메시지는 ACK 메시지 
- 재전송 
    - 동일 세그먼트를 다시 전송 
- 오류제어 
    - SELECTIVE - REPEAT 방식 , ADAPTIVE TIMER 사용 


#### 흐름 제어 
- 흐름 제어를 위해 수신자는 수신가능한 윈도우 (버퍼) 크기 를 알리고 송신자는 그에 맞게 전송한다. 

#### STOP - AND - GO 
- 한 패킷 전송 
- 해당 패킷에 대한 수신자의 응낙을기다린다. 
